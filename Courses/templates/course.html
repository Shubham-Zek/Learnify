{% extends "home.html" %}
{% block main %}
    {% if user.is_staff %}
        <div class="text-center">
            <button class="cursor-pointer rounded-full px-3 py-2 bg-white/50 text-black hover:bg-white/75"
                    hx-get="{% url 'addCourse' %}">Add Course</button>
        </div>
    {% endif %}
    <div class="flex justify-evenly mt-5">
        <div class="w-1/7">
            <h2 class="text-red-600/70 text-3xl font-bold">Course list</h2>
            <ul class="text-xl font-semibold">
                {% for course in courses %}
                    <li class="my-1 px-3 py-1 rounded-full {% if detail.pk == course.pk %}bg-white text-black{% endif %} hover:cursor-pointer hover:bg-white/75 hover:text-black"
                        {% if detail.pk == course.pk %}hx-get="{% url "courses" %}"{% else %} hx-get="{% url "courses" %}?pk={{ course.pk }}"{% endif %}
                        hx-push-url="false">{{ course.title }}</li>
                {% endfor %}
            </ul>
        </div>
        <div class="w-1/2">
            {% if detail %}
                <h2 class="text-red-600/70 text-2xl font-bold">Course Details</h2>
                <ul class="text-xl font-semibold">
                    <li class="px-3 py-1">Course Name: {{ detail.title }}</li>
                    <hr>
                    <li class="px-3 py-1">Description: {{ detail.description }}</li>
                    <hr>
                    <li class="px-3 py-1">Instructor: {{ detail.instructor }}</li>
                    <hr>
                    <li class="px-3 py-1">Instructor's Email: {{ detail.instructor.email }}</li>
                    <hr>
                    <li class="px-3 py-1">
                        Students:
                        <ul class="w-1/3 ms-3">
                            {% for student in detail.students.all %}
                                <li class="px-3 py-1 rounded-full hover:cursor-pointer hover:bg-white/75 hover:text-black"
                                    hx-get="{% url "students" %}?pk={{ student.pk }}">{{ student }}</li>
                            {% endfor %}
                        </ul>
                    </li>
                    <hr>
                </ul>
                {% if user.is_staff %}
                    <div class="flex gap-3 mt-3 ms-5">
                        <button hx-get="{% url "editCourse" detail.pk %}"
                                class="cursor-pointer rounded-full px-3 py-2 bg-white/50 text-black hover:bg-white/75">
                            Update
                        </button>
                        <button hx-get="{% url "deleteCourse" detail.pk %}"
                                class="cursor-pointer rounded-full px-3 py-2 bg-black/25 text-white hover:bg-black">
                            Delete
                        </button>
                    </div>
                {% endif %}
            {% endif %}
        </div>
    </div>
{% endblock main %}
